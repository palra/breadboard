<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: component.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: component.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var EventEmitter = require('events').EventEmitter,
    util = require('util');

/**
 * Component of the Breadboard IoC
 *
 * @constructor
 * @param  {Array} dependencies The name of the dependencies of the new component
 */
function Component(dependencies) {
    this._meta = {
        name: '',
        dependencies: {},
    };

    var that = this;

    if (util.isArray(dependencies))
        if (dependencies.length > 0)
            dependencies.forEach(function(item) {
                that._meta.dependencies[item] = undefined;
            });
}

util.inherits(Component, EventEmitter);

/**
 * Creates a new Component
 *
 * @param  {Array} dependencies The name of the dependencies of the new component
 * @param  {object}        content      Object that will extend the base Component
 * @return {Component}                 The new component
 */
Component.new = function(dependencies, content) {
    var ret;

    if (!util.isArray(dependencies)) {
        content = dependencies;
        dependencies = [];
    }

    ret = new Component(dependencies);
    _.assign(ret, content);
    return ret;
};

/**
 * Load dependencies of the component
 *
 * @name Component#_loadDependencies
 * @private
 * @return {Component} This component
 */
Object.defineProperty(Component.prototype, '_loadDependencies', {
    enumerable: false,
    writable: false,
    value: function() {
        for (var name in this._meta.dependencies) {
            if (this._meta.dependencies.hasOwnProperty(name)) {
                if (name != this._meta.name) {
                    if (this._breadboard.has(name)) {
                        this._meta.dependencies[name] =
                            this._breadboard.get(name);
                    } else {
                        throw new Error("No component named " + name);
                    }
                } else {
                    throw new Error("Can't add yourself as a dependency");
                }
            }
        }

        /**
         * Event fired when dependencies are loaded
         *
         * @event Component#dependencies:loaded
         * @type {Object.&lt;string, Component>}
         */
        this.emit('dependencies:loaded', this._meta.dependencies);

        return this;
    }
});

module.exports = Component;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Breadboard.html">Breadboard</a></li><li><a href="Component.html">Component</a></li></ul><h3>Events</h3><ul><li><a href="Breadboard.html#event:component:loaded">component:loaded</a></li><li><a href="Breadboard.html#event:components:loaded">components:loaded</a></li><li><a href="Component.html#event:dependencies:loaded">dependencies:loaded</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Wed Jun 04 2014 18:27:34 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
